<?php
    require 'config.php';
?>

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>men</title>
  </head>
  <body>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="styles.css">


    <div class="container-fluid">
    <div class="row">
              <div class="col-12 bg-dark" style="height: 1px;">
              </div>
            </div>
            <div class="row py-3">

                <div class="col-sm-2">
                    <img class="float-right float-sm-right" src="logo.png" width="50" height="50" alt="logo">
                </div>

                <div class="col-sm-6">
                    <form>
                        <div class="input-group mb-3 border border-dark" style="border-radius: 50px;">
                            <input type="text" style="border-radius: 50px 0px 0px 50px;" class="form-control" placeholder="Search anything" aria-label="Recipient's username" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button type="button" class="btn btn-light" style="border-radius: 0px 50px 50px 0px;"><i class="bi bi-search"></i></button>
                            </div>
                          </div>
                    </form>

                </div>

                <div class="col-sm-4">
                  
                    <h4 class="float-left mx-3"><i class="bi bi-person-circle"></i> <a href="login.html">account</a></h4>
                    <h4 class="float-left mx-"><i class="bi bi-cart4"></i> cart</h4>
                </div>

            </div>

            <div class="row sticky-top">
              <div class="col-12 bg-dark d-flex justify-content-center">
          
                <div class="dropbar"><button class="dropbtn" onclick="window.location.href='index.html';"><h5>Home</h5></button></div>
          
                <div class="dropbar">
                  <button class="dropbtn"><h5>Men</h5></button>
                      <div class="dropdown-content">
                        <div style="float: left; width:20%;"><img src="men.jpg" alt="men" style="border-radius: 10px; width: 80%;margin:10%"></div>
                        <div style="float: left; width:20%;"><h6>Top Wear</h6> <a href="men.php">Casual Shirts</a><a href="men.php">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                        <div style="float: left; width:20%;"><h6>Men Accessories</h6> <a href="men.html">Belts</a><a href="men.html">Cuff-Links</a><a href="men.html">Footweear</a><a href="men.html">hats and caps</a><a href="men.html">tie</a>  </div>
                        <div style="float: left; width:20%;"><h6>Bottom Wear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                        <div style="float: left; width:20%;"><h6>Sportswear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                      </div>
                </div>
          
                <div class="dropbar">
                  <button class="dropbtn"><h5>Women</h5></button>
                  <div class="dropdown-content">
                    <div style="float: left; width:20%;"><img src="women.jpg" alt="men" style="border-radius: 10px; width: 80%;margin:10%"></div>
                    <div style="float: left; width:20%;"><h6>Top Wear</h6> <a href="men.php">Casual Shirts</a><a href="men.php">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Men Accessories</h6> <a href="men.html">Belts</a><a href="men.html">Cuff-Links</a><a href="men.html">Footweear</a><a href="men.html">hats and caps</a><a href="men.html">tie</a>  </div>
                    <div style="float: left; width:20%;"><h6>Bottom Wear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Sportswear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                
                  </div>
                </div>
          
                <div class="dropbar">
                  <button class="dropbtn"><h5>Kids</h5></button>
                  <div class="dropdown-content">
                    <div style="float: left; width:20%;"><img src="kids.jpg" alt="men" style="border-radius: 10px; width: 80%;margin:10%"></div>
                    <div style="float: left; width:20%;"><h6>Top Wear</h6> <a href="men.php">Casual Shirts</a><a href="men.php">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Men Accessories</h6> <a href="men.html">Belts</a><a href="men.html">Cuff-Links</a><a href="men.html">Footweear</a><a href="men.html">hats and caps</a><a href="men.html">tie</a>  </div>
                    <div style="float: left; width:20%;"><h6>Bottom Wear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Sportswear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                  
                  </div>
                </div>
          
                <div class="dropbar">
                  <button class="dropbtn"><h5>Others</h5></button>
                  <div class="dropdown-content">
                    <div style="float: left; width:20%;"><img src="others.jpg" alt="men" style="border-radius: 10px; width: 80%;margin:10%"></div>
                    <div style="float: left; width:20%;"><h6>Top Wear</h6> <a href="men.php">Casual Shirts</a><a href="men.php">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Men Accessories</h6> <a href="men.html">Belts</a><a href="men.html">Cuff-Links</a><a href="men.html">Footweear</a><a href="men.html">hats and caps</a><a href="men.html">tie</a>  </div>
                    <div style="float: left; width:20%;"><h6>Bottom Wear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                    <div style="float: left; width:20%;"><h6>Sportswear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                
                  </div>
                </div>
                
                <div class="dropbar">
                  <button class="dropbtn"><h5>Design</h5></button>
                  <div class="dropdown-content">
                    <div style="float: left; width:80%;"><img src="design.gif" alt="men" style="border-radius: 10px; width: 80%;margin-left: 30px;margin-bottom: 30px;"></div>
                    <div style="float: left; width:20%;"><h6>Sportswear</h6> <a href="men.html">Casual Shirts</a><a href="men.html">Formal Shirt</a><a href="men.html">T-Shirt</a><a href="men.html">Round Neck T-shirt</a><a href="men.html">V-Neck T-Shirt</a>  </div>
                  
                  </div>
                </button></div>
                <div class="dropbar"><button class="dropbtn"><h5>Sew</h5></button></div>

          
          
              </div>
            </div>


        <div class="row">
          <div class="col-12 AVanim" style="height: 300px;">
            <img class="AVimg" src="p1.jpg" alt="Paris" width="300" height="300">
          </div>
        </div>

        <div class="row">
<!-- *********************************************FILTER SECTION********************************************************************** -->
<!-- ********************************************************************************************************************************* -->
          <div class="col-3">

            <h1>All Product</h1>
            <hr>



            <h3>Brand</h3>
              <ul class="list-group">
              <?php
                $sql="SELECT DISTINCT brand FROM product ORDER BY brand";
                $result = mysqli_query($link, $sql);
                while($row = mysqli_fetch_assoc($result)){
                
              ?>
                <li class="list-group-item">
                  <div class="form-check">
                    <label for="form-check-lable">
                      <input type="checkbox" class="form-chech-input product_check" value="<?=$row['brand']; ?>" id="brand">
                      <?=$row['brand']; ?>
                    </label>
                  </div>
                </li>
              <?php } ?>
              </ul>
<!-- *************************************************************************************************************************************** -->
              <h3>Category</h3>
              <ul class="list-group">
              <?php
                $sql="SELECT DISTINCT category FROM product ORDER BY category";
                $result = mysqli_query($link, $sql);
                while($row = mysqli_fetch_assoc($result)){
                
              ?>
                <li class="list-group-item">
                  <div class="form-check">
                    <label for="form-check-lable">
                      <input type="checkbox" class="form-chech-input product_check" value="<?=$row['category']; ?>" id="category">
                      <?=$row['category']; ?>
                    </label>
                  </div>
                </li>
              <?php } ?>
              </ul>
<!-- *************************************************************************************************************************************** -->
              <h3>Color</h3>
              <ul class="list-group">
              <?php
                $sql="SELECT DISTINCT color FROM product ORDER BY color";
                $result = mysqli_query($link, $sql);
                while($row = mysqli_fetch_assoc($result)){
                
              ?>
                <li class="list-group-item">
                  <div class="form-check">
                    <label for="form-check-lable">
                      <input type="checkbox" class="form-chech-input product_check" value="<?=$row['color']; ?>" id="color">
                      <?=$row['color']; ?>
                    </label>
                  </div>
                </li>
              <?php } ?>
              </ul>
<!-- **************************************************************************************************************************************** -->
              <h3>Size</h3>
              <ul class="list-group">
              <?php
                $sql="SELECT DISTINCT size FROM product ORDER BY size";
                $result = mysqli_query($link, $sql);
                while($row = mysqli_fetch_assoc($result)){
                
              ?>
                <li class="list-group-item">
                  <div class="form-check">
                    <label for="form-check-lable">
                      <input type="checkbox" class="form-chech-input product_check" value="<?=$row['size']; ?>" id="size">
                      <?=$row['size']; ?>
                    </label>
                  </div>
                </li>
              <?php } ?>
              </ul>




            </div>
<!-- *********************************************FILTER SECTION END********************************************************************** -->
<!-- ********************************************************************************************************************************* -->

          <div class="col-9">
              <h5 id="textChange">All Product</h5>
              <div class="text-center">
                  <img src="image\loader.gif" id="loader" width="400px" style="display: none;">
              </div>
              <div class="row" id="result">
                  <?php
                    $sql="SELECT * FROM product";
                    $result = mysqli_query($link, $sql);
                    while($row = mysqli_fetch_assoc($result)){ 
                  ?>
                  <div class="col-md-3">
                      <img src="<?= $row['image']?>" width="250px"><br>
                      <h5><?=$row['name']?></h5>
                      <h6><?=$row['price']?></h6>
                      <form action="preview.php" method="POST">
                      <input type="text" name="id" value="<?=$row['id']?>" hidden="true"><br>
                      <input type="submit" value="more">
                      </form>
                  </div>
                  <?php } ?>
              </div>
          </div>








        </div>



    </div>


    <script type="text/javascript">
      $(document).ready(function(){
//************************************************************CLICK CALL************************************** */
        $(".product_check").click(function(){
          var arr_brand = document.querySelectorAll("#brand");
          var arr_category = document.querySelectorAll("#category");
          var arr_color = document.querySelectorAll("#color");
          var arr_size = document.querySelectorAll("#size");

          sendstr="";

          brand = [];
          category = [];
          color = [];
          size = [];

          arr_brand.forEach(pro_filter1);
          arr_category.forEach(pro_filter2);
          arr_color.forEach(pro_filter3);
          arr_size.forEach(pro_filter4);

          if (brand.length>0){
            var myJSON = JSON.stringify(brand);
            sendstr = sendstr.concat("brand="+myJSON+"&");
          }
          if (category.length>0){
            var myJSON = JSON.stringify(category);
            sendstr = sendstr.concat("category="+myJSON+"&");
          }
          if (color.length>0){
            var myJSON = JSON.stringify(color);
            sendstr = sendstr.concat("color="+myJSON+"&");
          }
          if (size.length>0){
            var myJSON = JSON.stringify(size);
            sendstr = sendstr.concat("size="+myJSON+"&");
          }

          console.log(sendstr);

//************************************************************SENDING DATA TO SERVER******************************************** */
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              document.getElementById("result").innerHTML = this.responseText;
            }
          };
          xmlhttp.open("POST", "action.php", true);
          xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
          xmlhttp.send(sendstr);

        });
//********************************************************CLICK CALL END************************************************ */
        function pro_filter1(val){
        if(val.checked==true){
            brand.push(val.value);
        }
    }
    function pro_filter2(val){
        if(val.checked==true){
            category.push(val.value);
        }
    }
    function pro_filter3(val){
        if(val.checked==true){
            color.push(val.value);
        }
    }
    function pro_filter4(val){
        if(val.checked==true){
            size.push(val.value);
        }
    }

//******************************************************************************************************************************** */


      });
    </script>
  </body>
</html>